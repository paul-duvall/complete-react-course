// Div that will contain the app
const appRoot = document.getElementById('app');
const app = {
  title: 'Indecision App',
  subtitle: 'The app for people who can\'t stand making decisions!',
  options: []
};

// Function to generate the options in the user display
function displayOptions(options){
  // Only runs if there are items in the options array
  if (options.length > 0){
    return <div><p>Here are your options:</p>
          <ul>
            {
              app.options.map((option) => {
                return <li key={option}>{option}</li>
              })
            }
          </ul></div>
  } else {
    return <p>No options</p>
  }
}

// Adds new option to the array when the form is submitted
const onFormSubmit = (e) => {
  e.preventDefault();
  // Variable contains the text field value
  const option = e.target.elements.option.value;
  
  if(option){
    app.options.push(option);
    // Text field content removed
    e.target.elements.option.value = '';
    // App re-rendered to update display
    renderIndecisionApp();
  }
};

// Removes all items from the options array
const onRemoveAll = () => {
  app.options = [];
  // App re-rendered to update display
  renderIndecisionApp();  
};

const onMakeDecision = () => {
  const randomNum = Math.floor(Math.random() * app.options.length);
  const option = app.options[randomNum];
  alert(option);
};

const renderIndecisionApp = () => {
  // JSX - JavaScript XML
  // This is a JavaScript extension included within React
  // Note that app.subtitle is only displayed if it exists - the first part of the statement must be truth
  // The options are generated by a separate function
  const template = (
    <div>
      {/* JSX comments should be formatted like this*/}
      <h1>{app.title}</h1>
      {app.subtitle && <p>{app.subtitle}</p>}
      {/* Button is disabled if there are no items in the array */}
      <button disabled={app.options.length === 0} onClick={onMakeDecision}>What should I do?</button>
      <button onClick={onRemoveAll}>Remove All</button>
      {displayOptions(app.options)}
      <form onSubmit={onFormSubmit}>
        <input type="text" name="option" />
        <button>Add Option</button>
      </form>
  </div>
  );
  ReactDOM.render(template, appRoot);
};

renderIndecisionApp();